<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cat Categories</title>
    <style>
        .circle {
            display: flex;
            align-items: center;
        }
        .avator {
            width: 100px;
            height: 100px;
            border-radius: 50%;
        }
        .navbar {
            display: flex;
            justify-content: space-around;
        }
        .navbar .item {
            padding: 10px;
            cursor: pointer;
        }
        .navbar .active {
            font-weight: bold;
        }
        .catitem {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        .cat-name {
            margin-left: 10px;
        }
        .divLine {
            height: 1px;
            background-color: lightgray;
            width: 100%;
            margin: 10px 0;
        }
        .body {
            margin: 10px 0;
        }
        .bodybold {
            font-weight: bold;
        }
        .search-container {
            max-width: 800px;
            margin: 20px auto;
            text-align: center;
        }
        .search-input {
            width: 60%;
            padding: 12px 20px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 25px;
            margin-right: 10px;
            outline: none;
            transition: border-color 0.3s;
        }
        .search-input:focus {
            border-color: #4CAF50;
        }
        .search-button {
            padding: 12px 25px;
            font-size: 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .search-button:hover {
            background-color: #45a049;
        }
        .search-results {
            max-width: 800px;
            margin: 20px auto;
            display: none;
        }
        .cat-card {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            cursor: pointer;
            transition: transform 0.2s;
        }
        .cat-card:hover {
            transform: translateY(-3px);
        }
        .no-results {
            text-align: center;
            color: #666;
            padding: 20px;
        }
        .detail-container {
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
        }
        .back-button {
            padding: 8px 16px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 20px;
        }
        .back-button:hover {
            background-color: #45a049;
        }
        .cat-detail {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .detail-image {
            width: 300px;
            height: 300px;
            border-radius: 8px;
            object-fit: cover;
            display: block;
            margin: 0 auto;
        }
        .detail-name {
            text-align: center;
            margin: 20px 0;
            color: #333;
        }
        .detail-info {
            color: #666;
            line-height: 1.6;
        }
        .detail-info p {
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="search-container">
        <input type="text" id="searchInput" class="search-input" placeholder="æœç´¢çŒ«å’ªåå­—æˆ–æè¿°...">
        <button onclick="searchCats()" class="search-button">æœç´¢</button>
    </div>
    <div id="searchResults" class="search-results"></div>

    
    <div class="navbar">
        <span class="item" onclick="navbarTap(0)">åœ¨æ ¡</span>
        <span class="item" onclick="navbarTap(1)">æ¯•ä¸š</span>
        <span class="item" onclick="navbarTap(2)">ä¼‘å­¦</span>
        <span class="item" onclick="navbarTap(3)">å–µæ˜Ÿ</span>
    </div>

    <div id="content">
        <!-- åœ¨æ ¡ -->
        <div id="onCampus" style="display: none;">
            <a onclick="showCatDetails('ç³ç‘åŠä¸‰èŠ±')">
                <div class="catitem">
                    <img class="avator" src="./images/å±±èŠ±.png" alt="Avatar">
                    <div class="cat-name">ä¸‰èŠ±å’Œç³ç‘</div>
                </div>
            </a>
            <div class="divLine"></div>

            <a onclick="showCatDetails('æ©˜çŒ«åŠæ©˜ç™½')">
                <div class="catitem">
                    <img class="avator" src="./images/é»„å°å­™å¥³.png" alt="Avatar">
                    <div class="cat-name">æ©˜çŒ«å’Œæ©˜ç™½</div>
                </div>
            </a>
            <div class="divLine"></div>

            <a onclick="showCatDetails('çº¯è‰²')">
                <div class="catitem">
                    <img class="avator" src="./images/è–ç±³.png" alt="Avatar">
                    <div class="cat-name">çº¯è‰²</div>
                </div>
            </a>
            <div class="divLine"></div>

            <a onclick="showCatDetails('å¥¶ç‰›')">
                <div class="catitem">
                    <img class="avator" src="./images/è‹±æ°.png" alt="Avatar">
                    <div class="cat-name">å¥¶ç‰›</div>
                </div>
            </a>
            <div class="divLine"></div>

            <a onclick="showCatDetails('ç‹¸èŠ±')">
                <div class="catitem">
                    <img class="avator" src="./images/å¤§ç‹¸.png" alt="Avatar">
                    <div class="cat-name">ç‹¸èŠ±</div>
                </div>
            </a>
            <div class="divLine"></div>

            <a onclick="showCatDetails('æ‰€æœ‰')">
                <div class="catitem">
                    <img class="avator" src="./images/huihui.png" alt="Avatar">
                    <div class="cat-name">æ‰€æœ‰</div>
                </div>
            </a>
            <div class="divLine"></div>

            <div class="body">
                æµæµªçŒ«å®¢è§‚ä¸Šä¼šå¯¹æ ¡å†…é‡ç”Ÿç‰©ç§ï¼ˆä¸»è¦æ˜¯éƒ¨åˆ†é¸Ÿç±»ï¼‰äº§ç”Ÿè´Ÿé¢å½±å“ã€‚å¦‚æœç›®å‡»åˆ°æµæµªçŒ«æ­£åœ¨æ•çŒï¼Œæˆ‘ä»¬é¼“åŠ±åŒå­¦ä»¬é‡‡å–å®‰å…¨æ‰‹æ®µåŠ ä»¥é˜»æ­¢ã€‚
            </div>
            <div style="display: flex;margin-top:50px;">
                <div style="background-color: lightgray; width: 100%; height: 1px;"></div>
            </div>
            <div class="body">è‹¥æ‚¨åœ¨æ ¡å†…å¶é‡æµæµªçŒ«ï¼Œ<span class="bodybold">åˆ‡è®°</span>äººç±»çš„é£Ÿç‰©<span class="bodybold">ä¸è¦</span>å–‚ç»™æµæµªçŒ«ï¼</div>
            <div class="body">ğŸš«<span class="bodybold">å·§å…‹åŠ›ã€è‘¡è„åˆ¶å“ã€å¤§è‘±ã€æ´‹è‘±</span>ç­‰é£Ÿå“å¯¹çŒ«<span class="bodybold">æœ‰æ¯’</span>ï¼Œå¯èƒ½ä¼šå¼•èµ·æ€¥æ€§è‚¾è¡°ç«­ï¼Œåˆ‡<span class="bodybold">ä¸å¯ä»¥</span>å–‚é£Ÿï¼</div>
            <div class="body">ğŸš«<span class="bodybold">ç«è…¿è‚ </span>å’Œ<span class="bodybold">ç‰›å¥¶</span>ä¹Ÿå¹¶<span class="bodybold">ä¸é€‚åˆ</span>çŒ«å’ªï¼Œä¼šå¼•èµ·è‚ èƒƒååº”ï¼Œé€ æˆè…¹æ³»ç­‰çŠ¶å†µã€‚</div>
            <div class="body">ğŸš«é…¸æ€§çš„å„ç±»æ°´æœã€é¦™è¾›æ–™åˆ¶çš„è‚‰ç±»ã€ä¹Œè´¼ç­‰æµ·äº§ä¹Ÿ<span class="bodybold">å‡ä¸é€‚åˆ</span>çŒ«å’ªé£Ÿç”¨ã€‚</div>
            <div class="body">çŒ«å¸¸è§çš„è¾ƒåˆé€‚çš„é£Ÿç‰©æœ‰çŒ«ç²®ã€çŒ«ç½å¤´ã€ä»¥åŠå…¶å®ƒä¸€äº›çŒ«å’ªé›¶é£Ÿã€‚</div>
        </div>

        <!-- æ¯•ä¸š -->
        <div id="graduated" style="display: none;">
            <!-- è¿™é‡Œéœ€è¦ä½¿ç”¨JavaScriptæ¥å®ç°å¾ªç¯æ¸²æŸ“ -->
        </div>

        <!-- ä¼‘å­¦ -->
        <div id="onLeave" style="display: none;">
            <!-- è¿™é‡Œéœ€è¦ä½¿ç”¨JavaScriptæ¥å®ç°å¾ªç¯æ¸²æŸ“ -->
        </div>

        <!-- å–µæ˜Ÿ -->
        <div id="dead" style="display: none;">
            <!-- è¿™é‡Œéœ€è¦ä½¿ç”¨JavaScriptæ¥å®ç°å¾ªç¯æ¸²æŸ“ -->
        </div>

        <!-- ä¸‰èŠ±å’Œç³ç‘è¯¦ç»†ä¿¡æ¯ -->
        <div id="daiMaoSanHuaDetails" style="display: none;">
            <div class="body">è¿™é‡Œæ˜¯ä¸‰èŠ±å’Œç³ç‘çš„è¯¦ç»†ä¿¡æ¯</div>
            <div id="daiMaoSanHuaList"></div>
        </div>

        <!-- æ·»åŠ å…¶ä»–åˆ†ç±»çš„è¯¦ç»†ä¿¡æ¯å®¹å™¨ -->
        <div id="catDetails" style="display: none;">
            <div style="display: flex; align-items: center; margin-bottom: 20px;">
                <button onclick="goBack()" style="padding: 8px 16px; margin-right: 10px; cursor: pointer;">è¿”å›</button>
                <div class="body">è¿™é‡Œæ˜¯<span id="categoryTitle"></span>çš„è¯¦ç»†ä¿¡æ¯</div>
            </div>
            <div id="catList"></div>
        </div>

        <!-- æ·»åŠ çŒ«å’ªè¯¦æƒ…é¡µé¢ -->
        <div id="catDetailPage" style="display: none;">
            <div class="detail-container">
                <button onclick="backToMain()" class="back-button">è¿”å›</button>
                <div class="cat-detail">
                    <img id="catDetailImage" class="detail-image" src="" alt="çŒ«å’ªç…§ç‰‡">
                    <h2 id="catDetailName" class="detail-name"></h2>
                    <div class="detail-info">
                        <p>åˆ†ç±»ï¼š<span id="catDetailClassification"></span></p>
                        <p id="catDetailInfo"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const navbar = ["åœ¨æ ¡", "æ¯•ä¸š", "ä¼‘å­¦", "å–µæ˜Ÿ"];
        let currentTab = 0;

        // æ·»åŠ å˜é‡è®°å½•ä¸Šä¸€çº§é¡µé¢çŠ¶æ€
        let previousView = {
            type: 'main', // 'main' æˆ– 'category'
            classification: '' // å½“å‰æŸ¥çœ‹çš„åˆ†ç±»
        };

        function imageTap() {
            // å¤„ç†ç‚¹å‡»å¤´åƒçš„é€»è¾‘
        }

        function navbarTap(index) {
            currentTab = index;
            document.querySelectorAll('.navbar .item').forEach((item, i) => {
                item.classList.toggle('active', i === currentTab);
            });
            document.querySelectorAll('#content > div').forEach((div, i) => {
                div.style.display = i === currentTab ? 'block' : 'none';
            });
        }

        // ä¿®æ”¹çŒ«å’ªæ•°æ®ï¼Œä¸ºæ¯åªçŒ«æ·»åŠ ç®€å•æè¿°
        const fostered_cat = [
            { 
                _id: 1, 
                name: "è‹±æ°", 
                classification: "ç³ç‘åŠä¸‰èŠ±",
                info: "è‹±æ°æ˜¯ä¸€åªéå¸¸æ¸©é¡ºçš„å…¬çŒ«ï¼Œæ¯›è‰²ä¸ºé»‘ç™½ç›¸é—´ã€‚æ€§æ ¼æ´»æ³¼å¼€æœ—ï¼Œç‰¹åˆ«å–œæ¬¢å’ŒåŒå­¦äº’åŠ¨ã€‚ç»å¸¸åœ¨å›¾ä¹¦é¦†é™„è¿‘æ´»åŠ¨ï¼Œæ˜¯å­¦æ ¡é‡Œæœ€å—æ¬¢è¿çš„çŒ«å’ªä¹‹ä¸€ã€‚"
            },
            { 
                _id: 2, 
                name: "å±±èŠ±", 
                classification: "ç³ç‘åŠä¸‰èŠ±",
                info: "å±±èŠ±æ˜¯ä¸€åªç¾ä¸½çš„ä¸‰èŠ±çŒ«ï¼Œæ€§æ ¼æ¸©å’Œã€‚å¥¹å–œæ¬¢åœ¨æ•™å­¦æ¥¼å‘¨å›´æ™’å¤ªé˜³ï¼Œå¶å°”ä¼šå’ŒåŒå­¦ç©è€ã€‚å¥¹çš„å«å£°ç‰¹åˆ«å¥½å¬ï¼Œå°±åƒåœ¨å”±æ­Œä¸€æ ·ã€‚"
            }
        ];

        const unknown_cat = [
            { 
                _id: 3, 
                name: "å¤§ç‹¸", 
                classification: "çº¯è‰²",
                info: "å¤§ç‹¸æ˜¯ä¸€åªå¸…æ°”çš„é»‘çŒ«ï¼Œç‹¬æ¥ç‹¬å¾€çš„æ€§æ ¼è®©ä»–æ˜¾å¾—å¾ˆé…·ã€‚è™½ç„¶ä¸å¤ªçˆ±å’Œäººäº²è¿‘ï¼Œä½†ç»å¸¸åœ¨é£Ÿå ‚åé¢å®ˆæŠ¤ç€è¿™ç‰‡åŒºåŸŸï¼Œæ˜¯ä½å°½èŒçš„'ä¿å®‰'ã€‚"
            }
        ];

        const dead_cat = [
            { 
                _id: 4, 
                name: "è–ç±³", 
                classification: "çº¯è‰²",
                info: "è–ç±³æ›¾æ˜¯æ ¡å›­é‡Œæœ€å—æ¬¢è¿çš„çŒ«å’ªä¹‹ä¸€ï¼Œå¥¹æœ‰ç€æ¼‚äº®çš„ç™½è‰²æ¯›å‘å’Œæ¸©æŸ”çš„æ€§æ ¼ã€‚å¥¹ä¸ºæ ¡å›­å¸¦æ¥äº†å¾ˆå¤šæ¬¢ä¹ï¼Œæ°¸è¿œæ´»åœ¨å¤§å®¶çš„è®°å¿†ä¸­ã€‚"
            }
        ];

        const url = "./images/";

        function showCatDetails(classification) {
            // è®°å½•ä¸Šä¸€çº§çŠ¶æ€
            previousView = {
                type: 'main',
                classification: classification
            };

            // éšè—æ‰€æœ‰æ ‡ç­¾é¡µå†…å®¹
            document.querySelectorAll('#content > div').forEach(div => {
                div.style.display = 'none';
            });
            
            // æ˜¾ç¤ºå¯¹åº”åˆ†ç±»çš„è¯¦ç»†ä¿¡æ¯
            document.getElementById('catDetails').style.display = 'block';
            
            // æ›´æ–°åˆ†ç±»æ ‡é¢˜
            document.getElementById('categoryTitle').textContent = classification;
            
            // ä¿®æ”¹è¿™é‡Œï¼šä»æ‰€æœ‰æ•°ç»„ä¸­ç­›é€‰å¯¹åº”åˆ†ç±»çš„çŒ«å’ª
            const data = classification === 'æ‰€æœ‰' 
                ? [...fostered_cat, ...unknown_cat, ...dead_cat]
                : [...fostered_cat, ...unknown_cat, ...dead_cat].filter(cat => cat.classification === classification);
            
            renderCats(data, 'catList');
        }

        function renderCats(data, containerId) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            data.forEach(item => {
                const div = document.createElement('div');
                div.innerHTML = `
                    <div class="catitem" onclick="showCatDetailInfo(${item._id})" data-_id="${item._id}">
                        <img class="avator" src="${url}${item.name}.png" alt="Avatar">
                        <div class="cat-name">${item.name}</div>
                    </div>
                    <div class="divLine"></div>
                `;
                container.appendChild(div);
            });
        }

        function showCatDetailInfo(id) {
            const cat = [...fostered_cat, ...unknown_cat, ...dead_cat].find(c => c._id === id);
            if (!cat) return;

            // å¦‚æœæ˜¯ä»åˆ†ç±»é¡µé¢ç‚¹å‡»è¿›æ¥çš„ï¼Œè®°å½•åˆ†ç±»é¡µé¢çŠ¶æ€
            if (document.getElementById('catDetails').style.display === 'block') {
                previousView = {
                    type: 'category',
                    classification: document.getElementById('categoryTitle').textContent
                };
            }

            // éšè—æ‰€æœ‰å…¶ä»–å†…å®¹
            document.querySelectorAll('#content > div').forEach(div => {
                div.style.display = 'none';
            });

            // æ˜¾ç¤ºè¯¦æƒ…é¡µ
            document.getElementById('catDetailPage').style.display = 'block';
            
            // æ›´æ–°è¯¦æƒ…å†…å®¹
            document.getElementById('catDetailName').textContent = cat.name;
            document.getElementById('catDetailImage').src = `.${url}${cat.name}.png`;
            document.getElementById('catDetailClassification').textContent = cat.classification;
            document.getElementById('catDetailInfo').textContent = cat.info || 'æš‚æ— è¯¦ç»†ä¿¡æ¯';
        }

        navbarTap(0); // åˆå§‹åŒ–æ˜¾ç¤ºåœ¨æ ¡å†…å®¹
        renderCats(fostered_cat, 'graduated');
        renderCats(unknown_cat, 'onLeave');
        renderCats(dead_cat, 'dead');

        function editCat(id) {
            // å¤„ç†é•¿æŒ‰ç¼–è¾‘çŒ«çš„é€»è¾‘
        }

        function goBack() {
            // éšè—åˆ†ç±»è¯¦æƒ…
            document.getElementById('catDetails').style.display = 'none';
            // æ˜¾ç¤ºå½“å‰é€‰ä¸­æ ‡ç­¾é¡µçš„å†…å®¹
            document.querySelectorAll('#content > div').forEach((div, i) => {
                div.style.display = i === currentTab ? 'block' : 'none';
            });
        }

        // æ·»åŠ æœç´¢åŠŸèƒ½
        function searchCats() {
            const searchInput = document.getElementById('searchInput').value.toLowerCase();
            const searchResults = document.getElementById('searchResults');
            const mainContent = document.getElementById('content');

            if (!searchInput) {
                searchResults.style.display = 'none';
                mainContent.style.display = 'block';
                return;
            }

            // åˆå¹¶æ‰€æœ‰çŒ«å’ªæ•°æ®
            const allCats = [...fostered_cat, ...unknown_cat, ...dead_cat];

            const filteredCats = allCats.filter(cat => 
                cat.name.toLowerCase().includes(searchInput) || 
                cat.classification.toLowerCase().includes(searchInput)
            );

            searchResults.innerHTML = '';
            
            if (filteredCats.length > 0) {
                filteredCats.forEach(cat => {
                    const div = document.createElement('div');
                    div.className = 'cat-card';
                    div.innerHTML = `
                        <div class="catitem">
                            <img class="avator" src=".${url}${cat.name}.png" alt="Avatar">
                            <div class="cat-info">
                                <h3>${cat.name}</h3>
                                <p>åˆ†ç±»: ${cat.classification}</p>
                            </div>
                        </div>
                    `;
                    div.onclick = () => {
                        // ä»æœç´¢ç»“æœç‚¹å‡»æ—¶ï¼Œè®¾ç½®è¿”å›åˆ°ä¸»é¡µ
                        previousView = {
                            type: 'main',
                            classification: ''
                        };
                        showCatDetailInfo(cat._id);
                    };
                    searchResults.appendChild(div);
                });
                searchResults.style.display = 'block';
                mainContent.style.display = 'none';
            } else {
                searchResults.innerHTML = '<div class="no-results">æœªæ‰¾åˆ°ç›¸å…³çŒ«å’ª</div>';
                searchResults.style.display = 'block';
                mainContent.style.display = 'none';
            }
        }

        // æ·»åŠ æœç´¢ç»“æœçš„æ ·å¼
        const style = document.createElement('style');
        style.textContent = `
            .cat-card .catitem {
                padding: 15px;
                border-radius: 8px;
                background-color: #fff;
                box-shadow: 0 2px 5px rgba(0,0,0,0.1);
                margin-bottom: 10px;
                cursor: pointer;
                transition: transform 0.2s;
            }
            .cat-card .catitem:hover {
                transform: translateY(-3px);
            }
            .cat-card .cat-info {
                margin-left: 15px;
            }
            .cat-card .cat-info h3 {
                margin: 0 0 5px 0;
                color: #333;
            }
            .cat-card .cat-info p {
                margin: 0;
                color: #666;
            }
            .no-results {
                text-align: center;
                padding: 20px;
                color: #666;
                background-color: #f9f9f9;
                border-radius: 8px;
            }
        `;
        document.head.appendChild(style);

        // æ·»åŠ è¾“å…¥æ¡†å›è½¦æœç´¢åŠŸèƒ½
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchCats();
            }
        });

        // ä¿®æ”¹è¿”å›ä¸»é¡µé¢çš„å‡½æ•°
        function backToMain() {
            document.getElementById('catDetailPage').style.display = 'none';
            
            if (previousView.type === 'category') {
                // è¿”å›åˆ°åˆ†ç±»é¡µé¢
                showCatDetails(previousView.classification);
            } else {
                // è¿”å›åˆ°ä¸»é¡µé¢
                navbarTap(currentTab);
            }
        }
    </script>
</body>
</html>
